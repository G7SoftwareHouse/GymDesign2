<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <title>البحث</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" href="./css/bootstraprtl.css" />
    <link href="./css/bootstrap-toggle.min.css" rel="stylesheet" />
    <link href="./css/fontawesome.css" rel="stylesheet" />
    <link href="./css/brands.min.css" rel="stylesheet" />
    <link href="./css/solid.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="./css/all.css" />
    <link rel="stylesheet" href="./css/select2.min.css" />
    <link rel="stylesheet" href="css/jstree.css" />
    <!-- datetimepicker -->
    <link rel="stylesheet" href="css/tempusdominus-bootstrap.css" />
    <!-- AG-grid -->
    <link rel="stylesheet" href="./css/ag-grid.css" />
    <link rel="stylesheet" href="./css/ag-theme-balham.css" />
    <link rel="stylesheet" href="./css/custom-ag-grid.css" />
    <script src="js/ag-grid-enterprise.min.noStyle.js"></script>
    <!-- range slider  -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css"
    />
    <link
      rel="stylesheet"
      href="css/jquery-ui.css"
    />
    <link href="css/multirange.css" />
    <!-- Custom style -->
    <link rel="stylesheet" href="./css/custom.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/responsive.css" />

    <!-- Favicons -->
    <link rel="shortcut icon" href="images/fa-icon.png" />
    <link rel="apple-touch-icon" href="images/fa-icon.png" />
  </head>
  <body>
    <main class="p-4">
      <input type="text" class="rangeSlider" name="example_name" value="" />

      <!-- <div id="slider" class="mt-5"></div> -->
      <!-- <div class="slider noTime mt-5" id="slider"></div> -->

      <input type="range" multiple value="10,80" />
      <!-- Button trigger modal -->
      <button
        type="button"
        class="btn btn-primary mt-5"
        data-toggle="modal"
        data-target="#exampleModal"
      >
        Launch modal
      </button>
    </main>

    <!-- Modal time table -->
    <div
      class="edit_modal modal fade"
      id="exampleModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title bold">جدول المواعيد</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body py-0">
            <div class="form-row pt-3">
              <div class="form-group mb-0 col-lg-3 col-md-6">
                <label>الإسم</label>
                <input type="text" class="form-control" />
              </div>
              <div class="form-group mb-0 col-12">
                <label>الوصف</label>
                <input type="text" class="form-control" />
              </div>
            </div>
            <div class="border pb-2 pt-1 mt-4">
              <div class="row align-items-center m-0">
                <div class="col-2">
                  <h6>
                    السبت
                    <span
                      class="d-inline-block cursor float-right"
                      data-toggle="modal"
                      data-target="#addTimeModal"
                      data-dismiss="modal"
                      ><i class="far fa-plus-square"></i
                    ></span>
                  </h6>
                </div>
                <div class="col">
                  <div class="slider noTime" id="slider"></div>
                </div>
                <div class="col-1">
                  <a href="#"
                    ><i
                      class="fas fa-pen font-size-14 basic-text-lGray-color"
                    ></i
                  ></a>
                  <a href="#"
                    ><i
                      class="fas fa-trash-alt pl-1 font-size-20 text-danger"
                    ></i
                  ></a>
                </div>
              </div>
              <div class="row align-items-center m-0">
                <div class="col-2">
                  <h6>
                    الاحد
                    <span
                      class="d-inline-block cursor float-right"
                      data-toggle="modal"
                      data-target="#addTimeModal"
                      data-dismiss="modal"
                      ><i class="far fa-plus-square"></i
                    ></span>
                  </h6>
                </div>
                <div class="col">
                  <div class="slider noTime" id="slider2"></div>
                </div>
                <div class="col-1">
                  <a href="#"
                    ><i
                      class="fas fa-pen font-size-14 basic-text-lGray-color"
                    ></i
                  ></a>
                  <a href="#"
                    ><i
                      class="fas fa-trash-alt pl-1 font-size-20 text-danger"
                    ></i
                  ></a>
                </div>
              </div>
              <div class="row align-items-center m-0">
                <div class="col-2">
                  <h6>
                    الاثنين
                    <span
                      class="d-inline-block cursor float-right"
                      data-toggle="modal"
                      data-target="#addTimeModal"
                      data-dismiss="modal"
                      ><i class="far fa-plus-square"></i
                    ></span>
                  </h6>
                </div>
                <div class="col">
                  
                </div>
                <div class="col-1">
                  <a href="#"
                    ><i
                      class="fas fa-pen font-size-14 basic-text-lGray-color"
                    ></i
                  ></a>
                  <a href="#"
                    ><i
                      class="fas fa-trash-alt pl-1 font-size-20 text-danger"
                    ></i
                  ></a>
                </div>
              </div>
              <div class="row align-items-center m-0">
                <div class="col-2">
                  <h6>
                    الثلاثاء
                    <span
                      class="d-inline-block cursor float-right"
                      data-toggle="modal"
                      data-target="#addTimeModal"
                      data-dismiss="modal"
                      ><i class="far fa-plus-square"></i
                    ></span>
                  </h6>
                </div>
                <div class="col">
                  
                </div>
                <div class="col-1">
                  <a href="#"
                    ><i
                      class="fas fa-pen font-size-14 basic-text-lGray-color"
                    ></i
                  ></a>
                  <a href="#"
                    ><i
                      class="fas fa-trash-alt pl-1 font-size-20 text-danger"
                    ></i
                  ></a>
                </div>
              </div>
              <div class="row align-items-center m-0">
                <div class="col-2">
                  <h6>
                    الاربعاء
                    <span
                      class="d-inline-block cursor float-right"
                      data-toggle="modal"
                      data-target="#addTimeModal"
                      data-dismiss="modal"
                      ><i class="far fa-plus-square"></i
                    ></span>
                  </h6>
                </div>
                <div class="col">
                  
                </div>
                <div class="col-1">
                  <a href="#"
                    ><i
                      class="fas fa-pen font-size-14 basic-text-lGray-color"
                    ></i
                  ></a>
                  <a href="#"
                    ><i
                      class="fas fa-trash-alt pl-1 font-size-20 text-danger"
                    ></i
                  ></a>
                </div>
              </div>
              <div class="row align-items-center m-0">
                <div class="col-2">
                  <h6>
                    الخميس
                    <span
                      class="d-inline-block cursor float-right"
                      data-toggle="modal"
                      data-target="#addTimeModal"
                      data-dismiss="modal"
                      ><i class="far fa-plus-square"></i
                    ></span>
                  </h6>
                </div>
                <div class="col">
                  
                </div>
                <div class="col-1">
                  <a href="#"
                    ><i
                      class="fas fa-pen font-size-14 basic-text-lGray-color"
                    ></i
                  ></a>
                  <a href="#"
                    ><i
                      class="fas fa-trash-alt pl-1 font-size-20 text-danger"
                    ></i
                  ></a>
                </div>
              </div>
              <div class="row align-items-center m-0">
                <div class="col-2">
                  <h6>
                    الجمعة
                    <span
                      class="d-inline-block cursor float-right"
                      data-toggle="modal"
                      data-target="#addTimeModal"
                      data-dismiss="modal"
                      ><i class="far fa-plus-square"></i
                    ></span>
                  </h6>
                </div>
                <div class="col">
                  
                </div>
                <div class="col-1">
                  <a href="#"
                    ><i
                      class="fas fa-pen font-size-14 basic-text-lGray-color"
                    ></i
                  ></a>
                  <a href="#"
                    ><i
                      class="fas fa-trash-alt pl-1 font-size-20 text-danger"
                    ></i
                  ></a>
                </div>
              </div>
            </div>
            <div class="form-group form-check mt-4">
              <input type="checkbox" class="form-check-input" />
              <label class="form-check-label">جدول اجازات</label>
            </div>
          </div>
          <div class="modal-footer justify-content-center border-0">
            <button type="button" class="btn btn-success">
              <i class="fas fa-check pl-1"></i>حفظ
            </button>
            <button type="button" class="btn btn-danger" data-dismiss="modal">
              <i class="fas fa-trash-alt pl-1"></i>إلغاء
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal add time -->
    <div
      class="add_time edit_modal modal fade"
      id="addTimeModal"
      tabindex="-1"
      role="dialog"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title bold">ادخل المواعيد</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body py-0">
            <form class="form-inline form-row pt-3">
              <div class="form-group mb-2 col-2">
                <label>جدول اليوم</label>
              </div>
              <div class="form-group mb-2 col-8 px-3">
                <input type="text" class="form-control w-100" disabled />
              </div>
              <button type="submit" class="btn btn-primary mb-2 col-2">
                مسح
              </button>
            </form>
            <div class="border mt-3 pb-2 px-3">
              <form class="form-row align-items-center no-gutters pt-3">
                <div class="form-group mb-1 col-2">
                  <label>الوقت 1</label>
                </div>
                <div class="form-group col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group slash col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
              </form>
              <form class="form-row align-items-center no-gutters pt-3">
                <div class="form-group mb-1 col-2">
                  <label>الوقت 2</label>
                </div>
                <div class="form-group col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group slash col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
              </form>
              <form class="form-row align-items-center no-gutters pt-3">
                <div class="form-group mb-2 col-2">
                  <label>الوقت 3</label>
                </div>
                <div class="form-group col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group slash col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
              </form>
              <form class="form-row align-items-center no-gutters pt-3">
                <div class="form-group mb-2 col-2">
                  <label>الوقت 4</label>
                </div>
                <div class="form-group col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group slash col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
              </form>
              <form class="form-row align-items-center no-gutters pt-3">
                <div class="form-group mb-2 col-2">
                  <label>الوقت 5</label>
                </div>
                <div class="form-group col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group slash col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
                <div class="form-group points col mb-1 px-3">
                  <input type="text" class="form-control w-100" />
                </div>
              </form>
            </div>
          </div>
          <div class="modal-footer justify-content-center border-0">
            <button type="button" class="btn btn-success">
              <i class="fas fa-check pl-1"></i>حفظ
            </button>
            <button type="button" class="btn btn-danger" data-dismiss="modal">
              <i class="fas fa-trash-alt pl-1"></i>إلغاء
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="js/jquery-3.4.1.slim.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/all.min.js"></script>

    <!-- range slider  -->
    <script src="js/jquery-1.12.4.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>
    <script src="js/multirange.js"></script>
    <script>
      function fixPosition(slider, fromPercent) {
        let w;

        if (fromPercent === 100) {
          w = "calc(100% - 24px)";
        } else {
          w = "calc(" + fromPercent + "% - 12px)";
        }

        slider.find(".irs-bar").css("left", "auto").css("width", w);
        slider.find(".irs-handle").css("left", "auto").css("right", w);
      }
      let min = 0;
      let max = 24;
      $(".rangeSlider").ionRangeSlider({
        from: 10,
        to: 20,
        min: 0,
        max: 24,
        type: "double",
        grid: true,
        grid_num: 9,
        onStart: function (data) {
          fixPosition(data.slider, 0);
        },

        onChange: function (data) {
          data.from = min + (max - data.from);
          data.from_percent = 100 - data.from_percent;

          fixPosition(data.slider, data.from_percent);
        },

        prettify: function (num) {
          num = min + (max - num);
          return num;
        },
      });
    </script>
    <script>
      /*
       * Edited jQuery UI Slider
       */

      (function ($) {
        $.widget("ui.slider", $.ui.mouse, {
          getter: "value values",
          version: "@VERSION",
          eventPrefix: "slide",
          options: {
            animate: false,
            delay: 0,
            distance: 0,
            handles: null,
            activeHandle: 0,
            max: 24,
            min: 0,
            orientation: "horizontal",
            mainClass: "mainClass",
            range: false,
            typeNames: null,
            showTypeNames: false,
            type: "number",
            ranges: null,
            step: 1,
            disabled: true,
            isRTL: true,
            ticks: {
              // use default values
              // main tick is 3
              tickMain: 3,
              // side tick is 1
              tickSide: 1,
              // show main label
              tickShowLabelMain: true,
              // don't show side label
              tickShowLabelSide: false,
            },
            value: 0,
            values: null,
            tooltips: null,
          },
          _strpad: function (inputString, chars, padString) {
            var result = padString + inputString;
            var remFromLeft = result.length - chars;
            return result.substr(remFromLeft);
          },
          // get time from float (e.g. 22.5 => 22:30)
          _getTimeStringFromFloat: function (time) {
            time = parseFloat(time);
            // hours from the float
            var hours = Math.floor(time);
            // minutes from the float
            var minutes = (time - hours) * 60;
            // start time as string
            return hours + ":" + this._strpad(minutes, 2, "0");
          },

          _init: function () {
            var self = this,
              o = this.options;
            this._keySliding = false;
            this._handleIndex = null;
            this._detectOrientation();
            this._mouseInit();

            // add tick wrapper
            $('<div class="ticks"></div>').appendTo(this.element);

            // TODO
            // redo classes
            this.element.addClass(
              "ui-slider" +
                " ui-slider-" +
                this.orientation +
                " " +
                o.mainClass +
                " ui-widget" +
                " ui-widget-content" +
                " ui-corner-all"
            );
            // create handles
            this._refreshHandles();

            // create ticks if option is not disabled
            if (o.ticks !== false) {
              this._createTicks();
            }
            // call refresh value
            this._refreshValue();

            this._activateHandle(o.activeHandle);
          },

          // _setOptions is called with a hash of all options that are changing
          // always refresh when changing options
          _setOptions: function () {
            // _super and _superApply handle keeping the right this-context
            this._superApply(arguments);
            //this._refresh();
          },
          // _setOption is called for each individual option that is changing
          _setOption: function (key, value) {
            this._super(key, value);
          },

          // create ticks
          _createTicks: function () {
            var o = this.options;
            // minimum
            var min = this._valueMin();
            // maximum
            var max = this._valueMax();
            // count spacing
            var spacing = 100 / (max - min);

            var tickWapper = $(this.element).find("div.ticks");

            // create ticks
            for (var i = min; i <= max; i = i + o.ticks.tickSide) {
              // whole number
              if ((i / o.ticks.tickMain) % 1 === 0) {
                $('<span class="slider-tick-mark-main"></span>')
                  .css("left", spacing * i + "%")
                  .appendTo(tickWapper);
                if (o.ticks.tickShowLabelMain)
                  $('<span class="slider-tick-mark-main-text">' + i + "</span>")
                    .css("left", spacing * i + "%")
                    .appendTo(tickWapper);
              } else {
                $('<span class="slider-tick-mark-side"></span>')
                  .css("left", spacing * i + "%")
                  .appendTo(tickWapper);
                if (o.ticks.tickShowLabelSide)
                  $('<span class="slider-tick-mark-side-text">' + i + "</span>")
                    .css("left", spacing * i + "%")
                    .appendTo(tickWapper);
              }
            }
          },

          // add handle
          addHandle: function (handle) {
            var self = this,
              o = this.options;
            // add handle to handle list
            o.handles.push(handle);
            // refresh handles
            this._refreshHandles();
            // refresh values
            this._refreshValue();
          },
          // refresh handles
          _refreshHandles: function () {
            var self = this,
              o = this.options;
            // remove all handle elements
            $(".ui-slider-handle", this.element).remove();
            // remove all range elements
            $(".ui-slider-range", this.element).remove();

            // add handles for present values
            if (o.handles && o.handles.length) {
              // store this element
              var elem = self.element;

              // sort the handles by value
              o.handles.sort(function (a, b) {
                return a.value - b.value;
              });
              o.values = [];

              // go through all handles
              $.each(o.handles, function (i) {
                o.values.push(o.handles[i].value);

                // create handle element
                var handle = $('<a href="#"></a>');

                // append with classes
                handle
                  .appendTo(elem)
                  .addClass("ui-slider-handle")
                  .attr("data-id", i)
                  .attr("data-value", o.handles[i].value)
                  .addClass("ui-state-default" + " ui-corner-all");

                // if handle type was set
                if (o.handles[i].type !== null) {
                  handle
                    .attr("data-type", o.handles[i].type)
                    .addClass(o.handles[i].type);
                }

                // create ranges for all handles
                if (i < o.handles.length - 1) {
                  // create range element
                  var range = $("<div></div>");
                  // append with classes
                  range
                    .appendTo(elem)
                    .addClass("ui-slider-range")
                    .addClass("ui-widget-header");

                  // if handle type was set
                  if (o.handles[i].type !== null) {
                    range
                      .attr("data-type", o.handles[i].type)
                      .addClass(o.handles[i].type);
                  }
                }
              });
            }

            this.handles = $("a.ui-slider-handle", this.element);

            this.handle = this.handles.eq(0);

            this.handles
              .filter("a")
              .click(function (event) {
                event.preventDefault();
                // activate handle
                self._activateHandle($(this).attr("data-id"));

                //$(this).addClass('ui-state-active');
              })
              .hover(
                function () {
                  $(this).addClass("ui-state-hover");
                },
                function () {
                  $(this).removeClass("ui-state-hover");
                }
              )
              .focus(function () {
                $(".ui-slider .ui-state-focus", this.element).removeClass(
                  "ui-state-focus"
                );
                $(this).addClass("ui-state-focus");
              })
              .blur(function () {
                $(this).removeClass("ui-state-focus");
              });

            this.handles.each(function (i) {
              $(this).data("index.ui-slider-handle", i);
            });
            if (this.options.tooltips) {
              this.handles.append(
                '<span class="ui-slider-tooltip ui-widget-content ui-corner-all"></span>'
              );
            }

            // keyboard control
            this.handles
              .keydown(function (event) {
                var ret = true;

                var index = $(this).data("index.ui-slider-handle");

                if (self.options.disabled) return;

                switch (event.keyCode) {
                  case $.ui.keyCode.HOME:
                  case $.ui.keyCode.END:
                  case $.ui.keyCode.UP:
                  case $.ui.keyCode.RIGHT:
                  case $.ui.keyCode.DOWN:
                  case $.ui.keyCode.LEFT:
                    ret = false;
                    if (!self._keySliding) {
                      self._keySliding = true;
                      $(this).addClass("ui-state-active");
                      self._start(event, index);
                    }
                    break;
                }

                var curVal,
                  newVal,
                  step = self._step();
                if (self.options.values && self.options.values.length) {
                  curVal = newVal = self.values(index);
                } else {
                  curVal = newVal = self.value();
                }

                switch (event.keyCode) {
                  case $.ui.keyCode.HOME:
                    newVal = self._valueMin();
                    break;
                  case $.ui.keyCode.END:
                    newVal = self._valueMax();
                    break;
                  case $.ui.keyCode.UP:
                  case $.ui.keyCode.RIGHT:
                    if (curVal == self._valueMax()) return;
                    newVal = curVal + step;
                    break;
                  case $.ui.keyCode.DOWN:
                  case $.ui.keyCode.LEFT:
                    if (curVal == self._valueMin()) return;
                    newVal = curVal - step;
                    break;
                }

                self._slide(event, index, newVal);

                return ret;
              })
              .keyup(function (event) {
                var index = $(this).data("index.ui-slider-handle");

                if (self._keySliding) {
                  self._stop(event, index);
                  self._change(event, index);
                  self._keySliding = false;
                  $(this).removeClass("ui-state-active");
                }
              });
          },
          // activate handle
          _activateHandle: function (index) {
            // all handles
            this.handles = $("a.ui-slider-handle", this.element);
            // remove active handle indicator
            $(this.handles).removeClass("ui-state-active");

            // get the activated handle
            var handle = $(this.handles).eq(index);
            // add class
            handle.addClass("ui-state-active").focus();
            // get value
            var value = handle.attr("data-value");
            // get type
            var type = handle.attr("data-type");

            // set active handle
            this.options.activeHandle = index;

            // trigger the handleActivated event
            this._trigger("handleActivated", null, {
              index: index,
              value: value,
              type: type,
            });
          },

          // edit handle, change handle type
          editHandle: function (index, type) {
            // change handle type in options
            this.options.handles[index].type = type;
            // refresh handles
            this._refreshHandles();
            // refresh values
            this._refreshValue();
            // activate handle
            this._activateHandle(this.options.activeHandle);
          },

          // remove handle
          removeHandle: function (index) {
            // remove from options
            this.options.handles.splice(index, 1);
            // from values
            this.options.values.splice(index, 1);
            // remove element
            this.handles.eq(index).remove();
            // refresh handles
            this._refreshHandles();
            // refresh values
            this._refreshValue();
          },

          destroy: function () {
            this.handles.remove();
            this.range.remove();

            this.element
              .removeClass(
                "ui-slider" +
                  " ui-slider-horizontal" +
                  " ui-slider-vertical" +
                  " ui-slider-disabled" +
                  " ui-widget" +
                  " ui-widget-content" +
                  " ui-corner-all"
              )
              .removeData("slider")
              .unbind(".slider");

            this._mouseDestroy();
          },

          _mouseCapture: function (event) {
            var o = this.options;

            if (o.disabled) return false;

            this.elementSize = {
              width: this.element.outerWidth(),
              height: this.element.outerHeight(),
            };
            this.elementOffset = this.element.offset();

            var position = {
              x: event.pageX,
              y: event.pageY,
            };
            var normValue = this._normValueFromMouse(position);

            var distance = this._valueMax() - this._valueMin() + 1,
              closestHandle;
            var self = this,
              index;

            // if there is an active handle, set that
            if (self._handleIndex !== null)
              closestHandle = $(self.handles[self._handleIndex]);
            else {
              self.handles.each(function (i) {
                var thisDistance = Math.abs(normValue - self.values(i));
                if (distance > thisDistance) {
                  distance = thisDistance;
                  closestHandle = $(this);
                  index = i;
                }
              });
            }

            // workaround for bug #3736 (if both handles of a range are at 0,
            // the first is always used as the one with least distance,
            // and moving it is obviously prevented by preventing negative ranges)
            if (o.range === true && this.values(1) === o.min) {
              closestHandle = $(this.handles[++index]);
            }

            this._start(event, index);

            self._handleIndex = index;

            this._activateHandle($(closestHandle).attr("data-id"));

            // remove active class for all handles
            /*this.handles.removeClass('ui-state-active');
        // add to closest handle
        closestHandle
        .addClass('ui-state-active')
        .focus();*/

            var offset = closestHandle.offset();
            var mouseOverHandle = !$(event.target)
              .parents()
              .andSelf()
              .is(".ui-slider-handle");
            this._clickOffset = mouseOverHandle
              ? {
                  left: 0,
                  top: 0,
                }
              : {
                  left: event.pageX - offset.left - closestHandle.width() / 2,
                  top:
                    event.pageY -
                    offset.top -
                    closestHandle.height() / 2 -
                    (parseInt(closestHandle.css("borderTopWidth"), 10) || 0) -
                    (parseInt(closestHandle.css("borderBottomWidth"), 10) ||
                      0) +
                    (parseInt(closestHandle.css("marginTop"), 10) || 0),
                };

            normValue = this._normValueFromMouse(position);
            this._slide(event, index, normValue);
            return true;
          },

          _mouseStart: function (event) {
            return true;
          },

          // mouse drag handler
          _mouseDrag: function (event) {
            var position = {
              x: event.pageX,
              y: event.pageY,
            };
            var normValue = this._normValueFromMouse(position);

            this._slide(event, this._handleIndex, normValue);

            return false;
          },

          // mouse stop drag handler
          _mouseStop: function (event) {
            //this.handles.removeClass('ui-state-active');
            this._stop(event, this._handleIndex);
            this._change(event, this._handleIndex);
            this._handleIndex = null;
            this._clickOffset = null;

            return false;
          },

          _detectOrientation: function () {
            this.orientation =
              this.options.orientation == "vertical"
                ? "vertical"
                : "horizontal";
          },

          _normValueFromMouse: function (position) {
            var pixelTotal, pixelMouse;
            if ("horizontal" == this.orientation) {
              pixelTotal = this.elementSize.width;
              pixelMouse =
                position.x -
                this.elementOffset.left -
                (this._clickOffset ? this._clickOffset.left : 0);
            } else {
              pixelTotal = this.elementSize.height;
              pixelMouse =
                position.y -
                this.elementOffset.top -
                (this._clickOffset ? this._clickOffset.top : 0);
            }

            var percentMouse = pixelMouse / pixelTotal;
            if (percentMouse > 1) percentMouse = 1;
            if (percentMouse < 0) percentMouse = 0;
            if ("vertical" == this.orientation) percentMouse = 1 - percentMouse;

            var valueTotal = this._valueMax() - this._valueMin(),
              valueMouse = percentMouse * valueTotal,
              valueMouseModStep = valueMouse % this.options.step,
              normValue = this._valueMin() + valueMouse - valueMouseModStep;

            if (valueMouseModStep > this.options.step / 2)
              normValue += this.options.step;

            // Since JavaScript has problems with large floats, round
            // the final value to 5 digits after the decimal point (see #4124)
            return parseFloat(normValue.toFixed(5));
          },

          _start: function (event, index) {
            var uiHash = {
              handle: this.handles[index],
              value: this.value(),
            };
            if (this.options.values && this.options.values.length) {
              uiHash.value = this.values(index);
              uiHash.values = this.values();
            }
            this._trigger("start", event, uiHash);
          },

          _slide: function (event, index, newVal) {
            var handle = this.handles[index];

            if (this.options.values && this.options.values.length) {
              var oldVal = this.values(index);

              if (
                oldVal < newVal &&
                index < this.options.values.length - 1 &&
                newVal >= this.options.values[index + 1]
              )
                newVal = this.options.values[index + 1] - this.options.step;

              if (
                oldVal > newVal &&
                index > 0 &&
                newVal <= this.options.values[index - 1]
              )
                newVal = this.options.values[index - 1] + this.options.step;

              if (newVal != oldVal) {
                var newValues = this.values();
                newValues[index] = newVal;
                // A slide can be canceled by returning false from the slide callback
                var allowed = this._trigger("slide", event, {
                  handle: this.handles[index],
                  value: newVal,
                  values: newValues,
                });
                if (allowed !== false) {
                  this.values(
                    index,
                    newVal,
                    event.type == "mousedown" && this.options.animate,
                    true
                  );
                }
              }
            } else {
              if (newVal != this.value()) {
                // A slide can be canceled by returning false from the slide callback
                var allowed = this._trigger("slide", event, {
                  handle: this.handles[index],
                  value: newVal,
                });
                if (allowed !== false) {
                  this._setData(
                    "value",
                    newVal,
                    event.type == "mousedown" && this.options.animate
                  );
                }
              }
            }
          },

          _stop: function (event, index) {
            var uiHash = {
              handle: this.handles[index],
              value: this.value(),
            };
            if (this.options.values && this.options.values.length) {
              uiHash.value = this.values(index);
              uiHash.values = this.values();
            }
            this._trigger("stop", event, uiHash);
          },

          _change: function (event, index) {
            var uiHash = {
              handle: this.handles[index],
              value: this.value(),
            };
            if (this.options.values && this.options.values.length) {
              uiHash.value = this.values(index);
              uiHash.values = this.values();
            }
            this._trigger("change", event, uiHash);
          },

          value: function (newValue) {
            if (arguments.length) {
              this._setData("value", newValue);
              this._change(null, 0);
            }

            return this._value();
          },

          values: function (index, newValue, animated, noPropagation) {
            if (arguments.length > 1) {
              this.options.values[index] = newValue;
              this._refreshValue(animated);
              if (!noPropagation) this._change(null, index);
            }

            if (arguments.length) {
              if (this.options.values && this.options.values.length) {
                return this._values(index);
              } else {
                return this.value();
              }
            } else {
              return this._values();
            }
          },

          _setData: function (key, value, animated) {
            $.widget.prototype._setData.apply(this, arguments);

            switch (key) {
              case "orientation":
                this._detectOrientation();

                this.element
                  .removeClass("ui-slider-horizontal ui-slider-vertical")
                  .addClass("ui-slider-" + this.orientation);
                this._refreshValue(animated);
                break;
              case "value":
                this._refreshValue(animated);
                break;
            }
          },

          _step: function () {
            var step = this.options.step;
            return step;
          },

          _value: function () {
            var val = this.options.value;
            if (val < this._valueMin()) val = this._valueMin();
            if (val > this._valueMax()) val = this._valueMax();

            return val;
          },

          _values: function (index) {
            if (arguments.length) {
              var val = this.options.values[index];
              if (val < this._valueMin()) val = this._valueMin();
              if (val > this._valueMax()) val = this._valueMax();

              return val;
            } else {
              return this.options.values;
            }
          },

          _valueMin: function () {
            var valueMin = this.options.min;
            return valueMin;
          },

          _valueMax: function () {
            var valueMax = this.options.max;
            return valueMax;
          },

          // refresh value function
          _refreshValue: function (animate) {
            var oRange = this.options.range,
              o = this.options,
              self = this;
            var numOptions = this.options.values
              ? this.options.values.length
              : 0;

            if (numOptions) {
              // minimum
              var min = this._valueMin();
              // maximum
              var max = this._valueMax();
              // whole range
              var diff = this._valueMax() - this._valueMin();
              /*if (oRange === true) {
                var firstHandlePercent = (this.values(0) - min) / diff * 100;
                var rangePercent = (this.values(numOptions-1) - min) / diff * 100 - firstHandlePercent;
                if (self.orientation == 'horizontal') {
                    self.range.stop(1,1)[animate ? 'animate' : 'css']({
                        left: firstHandlePercent + '%', 
                        width: rangePercent + '%'
                    }, o.animate);
                } else {
                    self.range.stop(1,1)[animate ? 'animate' : 'css']({
                        bottom: firstHandlePercent + '%', 
                        height: rangePercent + '%'
                    }, o.animate);
                }
            }*/
              var allHandles = this.handles;
              // all handles
              this.handles.each(function (i, j) {
                var valPercent = ((self.values(i) - min) / diff) * 100;
                // value of handler in percent
                //var valPercent = ($(this).attr('data-value') - min) / diff * 100;
                var _set = {};
                _set[self.orientation == "horizontal" ? "left" : "bottom"] =
                  valPercent + "%";
                $(this)
                  .stop(1, 1)
                  [animate ? "animate" : "css"](_set, o.animate);

                // add attribute with value
                $(this).attr("data-value", self.values(i));
                o.handles[i].value = self.values(i);

                // show tooltip
                if (o.tooltips) {
                  //$('.ui-slider-tooltip', this).text(o.tooltips[self.values(i)]);
                  var text = "";
                  // if not last show range to next
                  if (i < allHandles.length - 1) {
                    if (o.showTypeNames) {
                      text += o.typeNames[$(this).attr("data-type")];
                    }
                    if (o.type == "number")
                      text +=
                        " " +
                        $(this).attr("data-value") +
                        " - " +
                        allHandles.eq(i + 1).attr("data-value");
                    else if (o.type == "time")
                      text +=
                        " " +
                        self._getTimeStringFromFloat(
                          $(this).attr("data-value")
                        ) +
                        " - " +
                        self._getTimeStringFromFloat(
                          allHandles.eq(i + 1).attr("data-value")
                        );
                  }
                  // if last show range from previous
                  else {
                    if (o.showTypeNames) {
                      text += o.typeNames[$(this).attr("data-type")];
                    }
                    if (o.type == "number")
                      text += " " + $(this).attr("data-value") + " - " + o.max;
                    if (o.type == "time")
                      text +=
                        " " +
                        self._getTimeStringFromFloat(
                          $(this).attr("data-value")
                        ) +
                        " - 0:00";
                  }
                  $(".ui-slider-tooltip", this).text(text);
                  //$('.ui-slider-tooltip', this).text(self._getTimeStringFromFloat(allHandles.eq(i-1).attr('data-value'))+' - '+self._getTimeStringFromFloat($(this).attr('data-value')));
                  /*
                    if (i < allHandles.length-1)
                        $('.ui-slider-tooltip', this).text(self.values(i)+' - '+self.values(i+1));
                    // if last show range from previous
                    else
                        $('.ui-slider-tooltip', this).text(self.values(i-1)+' - '+self.values(i));
                     */
                }
              });

              // get all range elements
              var ranges = $(".ui-slider-range", this.element);
              // go through all ranges
              ranges.each(function (i, j) {
                // get value of this handler
                var valPercent = ((self.values(i) - min) / diff) * 100;
                // get value of nex handler
                // if not last, get next
                if (i < ranges.length)
                  var nextPercent = ((self.values(i + 1) - min) / diff) * 100;
                // else 100%
                else var nextPercent = 100;
                // get range width
                var rangePercent = nextPercent - valPercent;
                // set style by orientation
                if (self.orientation == "horizontal") {
                  $(this).css({
                    left: valPercent + "%",
                    width: rangePercent + "%",
                  });
                } else {
                  $(this).css({
                    bottom: valPercent + "%",
                    height: rangePercent + "%",
                  });
                }
                /*
                $(this).removeClass('minimum');
                $(this).removeClass('saving');
                $(this).removeClass('comfort');
                $(this).addClass($('.ui-slider-handle:eq('+i+')', self.element).attr('data-temperature'));    */
              });
            } else {
              var value = this.value(),
                valueMin = this._valueMin(),
                valueMax = this._valueMax(),
                valPercent =
                  valueMax != valueMin
                    ? ((value - valueMin) / (valueMax - valueMin)) * 100
                    : 0;
              var _set = {};
              _set[self.orientation == "horizontal" ? "left" : "bottom"] =
                valPercent + "%";
              this.handle
                .stop(1, 1)
                [animate ? "animate" : "css"](_set, o.animate)
                .find(".ui-slider-tooltip")
                .text(o.tooltips ? o.tooltips[self.value()] : "");

              oRange == "min" &&
                this.orientation == "horizontal" &&
                this.range.stop(1, 1)[animate ? "animate" : "css"](
                  {
                    width: valPercent + "%",
                  },
                  o.animate
                );
              oRange == "max" &&
                this.orientation == "horizontal" &&
                this.range[animate ? "animate" : "css"](
                  {
                    width: 100 - valPercent + "%",
                  },
                  {
                    queue: false,
                    duration: o.animate,
                  }
                );
              oRange == "min" &&
                this.orientation == "vertical" &&
                this.range.stop(1, 1)[animate ? "animate" : "css"](
                  {
                    height: valPercent + "%",
                  },
                  o.animate
                );
              oRange == "max" &&
                this.orientation == "vertical" &&
                this.range[animate ? "animate" : "css"](
                  {
                    height: 100 - valPercent + "%",
                  },
                  {
                    queue: false,
                    duration: o.animate,
                  }
                );
            }
          },
        });
      })(jQuery);
    </script>
    <script>
      $(function () {
        // function to create slider ticks
        var setSliderTicks = function () {
          // slider element
          var $slider = $(".slider");
          var max = $slider.slider("option", "max");
          var min = $slider.slider("option", "min");
          var step = $slider.slider("option", "step");
          var spacing = 100 / (max - min);
          // tick element
          var ticks = $slider.find("div.ticks");

          // remove all ticks if they exist
          $slider.find(".ui-slider-tick-mark-main").remove();
          $slider.find(".ui-slider-tick-mark-text").remove();
          $slider.find(".ui-slider-tick-mark-side").remove();

          // generate ticks
          for (var i = min; i <= max; i = i + step) {
            // main ticks (whole number)
            if (i % 1 === 0) {
              $('<span class="ui-slider-tick-mark-main"></span>')
                .css("left", spacing * i + "%")
                .appendTo(ticks);
              $('<span class="ui-slider-tick-mark-text">' + i + "</span>")
                .css("left", spacing * i + "%")
                .appendTo(ticks);
            }
            // side ticks
            else {
              $('<span class="ui-slider-tick-mark-side"></span>')
                .css("left", spacing * i + "%")
                .appendTo(ticks);
            }
          }
        };

        // create slider
        $("#slider").slider({
          // set min and maximum values
          // day hours in this example
          min: 0,
          max: 24,
          // step
          // quarter of an hour in this example
          step: 0.25,
          // range
          range: false,
          // show tooltips
          tooltips: true,
          // RTL
          isRTL: true,
          // current data
          handles: [
            {
              value: 1,
              type: "timeOne",
            },
            {
              value: 2,
              type: "timeTwo",
            },
            {
              value: 5,
              type: "timeThree",
            },
            {
              value: 8,
              type: "timeFour",
            },
            {
              value: 10,
              type: "timeFive",
            },
            {
              value: 15,
              type: "timeSix",
            },
            {
              value: 17,
              type: "timeSeven",
            },
            {
              value: 20,
              type: "timeEight",
            },
            {
              value: 23,
              type: "timeNine",
            },
            {
              value: 24,
              type: "timeTen",
            },
          ],
          // main css class (of unset data)
          mainClass: "noTime",
          // slide callback
          slide: function (e, ui) {
            console.log(e, ui);
          },
          // handle clicked callback
          handleActivated: function (event, handle) {
            // get select element
            var select = $(this).parent().find(".slider-controller select");
            // set selected option
            select.val(handle.type);
          },
        });

        // create slider
        $("#slider2").slider({
          // set min and maximum values
          // day hours in this example
          min: 0,
          max: 24,
          // step
          // quarter of an hour in this example
          step: 0.25,
          // range
          range: false,
          // show tooltips
          tooltips: true,
          // RTL
          isRTL: true,
          // current data
          handles: [
            {
              value: 1,
              type: "timeOne",
            },
            {
              value: 2,
              type: "timeTwo",
            },
            {
              value: 5,
              type: "timeThree",
            },
            {
              value: 8,
              type: "timeFour",
            },
            {
              value: 10,
              type: "timeFive",
            },
            {
              value: 15,
              type: "timeSix",
            },
            {
              value: 17,
              type: "timeSeven",
            },
            {
              value: 20,
              type: "timeEight",
            },
            {
              value: 23,
              type: "timeNine",
            },
            {
              value: 24,
              type: "timeTen",
            },
          ],
          // main css class (of unset data)
          mainClass: "noTime",
          // slide callback
          slide: function (e, ui) {
            console.log(e, ui);
          },
          // handle clicked callback
          handleActivated: function (event, handle) {
            // get select element
            var select = $(this).parent().find(".slider-controller select");
            // set selected option
            select.val(handle.type);
          },
        });

        // button for adding new ranges
        $(".slider-controller button.add").click(function (e) {
          e.preventDefault();
          // get slider
          var $slider = $("#slider");
          // trigger addHandle event
          $slider.slider("addHandle", {
            value: 12,
            type: $(".slider-controller select").val(),
          });
          return false;
        });

        // button for removing currently selected handle
        $(".slider-controller button.remove").click(function (e) {
          e.preventDefault();
          // get slider
          var $slider = $("#slider");
          // trigger removeHandle event on active handle
          $slider.slider(
            "removeHandle",
            $slider.find("a.ui-state-active").attr("data-id")
          );

          return false;
        });

        // when clicking on handler
        $(document).on("click", ".slider a", function () {
          var select = $(".slider-controller select");
          // enable if disabled
          //select.attr('disabled', false);
          alert($(this).attr("data-type"));
          select.val($(this).attr("data-type"));
          /*if ($(this).parent().find('a.ui-state-active').length)
    $(this).toggleClass('ui-state-active');*/
        });
      });
    </script>
  </body>
</html>
